<!--#include file="/common/header_detail.html" -->

<!-- <form action="/privilege/admin_edit.do" method="post" name="edit_from" id="edit_from" onsubmit="return submit_form(this)">
	<input name="act" type="hidden" value="save"/>
	<input name="admin_id" type="hidden" value="${admin_id}"/>
<div class="box_space" style="height:20px;"></div>
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="edit_table">
	<tr>
		<td width="120" align="right" class="title">*登录名：</td>
		<td>
<input name="admin_loginname" type="text" value="${admin_loginname}" size="48" maxlength="20" style="width:300px" readonly />
		</td>
	</tr>
	<tr>
		<td align="right" class="title">类型：</td>
		<td>
			if(admin_loginname == "admin")
			<select name="admin_type" style="width:300px">
<option value="0">超级管理员</option>
			</select> 
			else
			<select name="admin_type" style="width:300px">
for(row : adminTypes)
<option value="${row[key]}" if(intval(admin_type)==intval(row["key"]))selectedend>${row[val]}</option>
end
			</select> 
			end


		</td>
	</tr>
	<tr>
		<td align="right" class="title">状态：</td>
		<td>
			<select name="admin_status" style="width:300px">
				<option value="1" if(admin_status==1)selectedend>启用</option>
				<option value="0" if(admin_status==0)selectedend>禁用</option>
			</select> 
		</td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">*姓名：</td>
		<td><input name="admin_realname" v_rule='{"model":"text_cn_en", "blen":"2,40", "msg_fail":"输入错误，请输入2到40个中英文字符","msg_ok":"输入正确"}' type="text" value="${admin_realname}" size="48" maxlength="40" style="width:300px"/></td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">所属部门：</td>
		<td><input name="admin_department" v_rule='{"model":"text_cn_en", "blen":"0,40", "msg_fail":"输入错误，请输入2到40个中英文字符","msg_ok":"输入正确"}' type="text" value="${admin_department}" size="48" maxlength="40" style="width:300px"/></td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">联系电话：</td>
		<td><input name="admin_tel" v_rule='{"model":"tel", "blen":"0,20", "msg_fail":"输入错误，请输入电话号码格式，最多20个字符","msg_ok":"输入正确"}' type="text" value="${admin_tel}" size="48" maxlength="20" style="width:300px"/></td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">手机号码：</td>
		<td><input name="admin_mobile" v_rule='{"model":"mobile", "blen":"0,20", "msg_fail":"输入错误，请输入手机号码格式，最多20个字符","msg_ok":"输入正确"}' type="text" value="${admin_mobile}" size="48" maxlength="20" style="width:300px"/></td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">email地址：</td>
		<td><input name="admin_email" v_rule='{"model":"email", "blen":"0,50", "msg_fail":"输入错误，请输入邮箱格式，最多50个字符","msg_ok":"输入正确"}' type="text" value="${admin_email}" size="48" maxlength="50" style="width:300px"/></td>
	</tr>
	<tr>
		<td width="120" align="right" class="title">性别：</td>
		<td>
			<select name="admin_sex" style="width:300px">
				<option value="1" if(admin_sex==1)selectedend>男</option>
				<option value="2" if(admin_sex==2)selectedend>女</option>
			</select> 
		</td>
	</tr>
</table>
<div class="box_space" style="height:20px;"></div>
	<table width="100%" border="0" cellpadding="0" cellspacing="0" class="edit_table">
    	<tr>
		<td width="120" align="right"></td>
		<td>
            <input type="submit" value="确认" id="btn_submit" />
            <input type="button" value="返回" id="btn_close"  />
	</td></tr>
	</table>
</form> -->



<div id="body">

<form action="/privilege/admin_edit.do" method="post" class="form-horizontal" name="edit_from" role="frm" id="frm" >
<input name="act" type="hidden" value="save"/>
<input name="admin_id" type="hidden" value="${admin_id}"/>
<div class="row" >
 <div class="col-lg-12" >
	<div class="ibox-content">
		
		<div class="form-group">
			<label class="col-sm-2 control-label">*登录名：</label>
	      <div class="col-sm-5">
	          <input name="admin_loginname"  type="text"  value="${admin_loginname}" class="form-control"  readonly/>
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	  
	    <div class="form-group">
	       <label class="col-sm-2 control-label">类型：</label>
	       <div class="col-sm-5">
				<!-- if(admin_loginname == "admin") -->
				<select name="admin_type" class="form-control">
					<option value="0">超级管理员</option>
				</select> 
				<!-- else -->
				<select name="admin_type" class="form-control">
				<!-- for(row : adminTypes) -->
				<option value="${row[key]}" <!-- if(intval(admin_type)==intval(row["key"])) -->selected<!-- end -->>${row[val]}</option>
				<!-- end -->
				</select> 
				<!-- end -->
	       </div>
	       <div class="col-sm-5"></div>
	    </div>
	    
	    <div class="form-group">
	       <label class="col-sm-2 control-label">状态：</label>
	       <div class="col-sm-5">
	       	<select name="admin_status" class="form-control">
				<option value="1" <!-- if(admin_status==1) -->selected<!-- end -->>启用</option>
				<option value="0" <!-- if(admin_status==0) -->selected<!-- end -->>禁用</option>
			</select> 
	       </div>
	       <div class="col-sm-5"></div>
	    </div>  
	     
	     <div class="form-group">
			<label class="col-sm-2 control-label">*姓名：</label>
	      <div class="col-sm-5">
	          <input name="admin_realname"  type="text"  value="${admin_realname}" class="form-control" />
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	   <div class="form-group">
			<label class="col-sm-2 control-label">所属部门：</label>
	      <div class="col-sm-5">
	          <input name="admin_department" type="text"  value="${admin_department}" class="form-control" />
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	   <div class="form-group">
			<label class="col-sm-2 control-label">联系电话：</label>
	      <div class="col-sm-5">
	          <input name="admin_tel"  type="text"  value="${admin_tel}" class="form-control" />
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	   <div class="form-group">
			<label class="col-sm-2 control-label">手机号码：</label>
	      <div class="col-sm-5">
	          <input name="admin_mobile"  type="text"  value="${admin_mobile}" class="form-control" />
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	   <div class="form-group">
			<label class="col-sm-2 control-label">email地址：</label>
	      <div class="col-sm-5">
	          <input name="admin_email"  type="text"  value="${admin_email}" class="form-control" />
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	   <div class="form-group">
			<label class="col-sm-2 control-label">性别：</label>
	      <div class="col-sm-5">
	          <select name="admin_sex" class="form-control">
				<option value="1" <!-- if(admin_sex==1) -->selected<!-- end -->>男</option>
				<option value="2" <!-- if(admin_sex==2) -->selected<!-- end -->>女</option>
			</select>
	      </div>
	      <div class="col-sm-5"></div>
	   </div>
	   
	</div>
</div>
</div>

<div style="height:71px">
</div>

<div class="modal-footer">
	<button class="btn btn-primary" id="save-data" type="submit" >保存</button>
	<button data-dismiss="modal" class="btn btn-white" type="button">关闭</button>
</div>
</form>
</div>




<script>
function submit_form_pwd(){

	var frm = $("#frm");
	var post_data = frm.serialize();
	setTimeout(function(){
	    layer.load("请稍候......", 10);
	}, 0);
	$.post(frm.attr("action"), post_data, function (data){
		layer.closeAll('loading');
		if(data && data.result == 1){
			layer.alert(data.message,1 ,function (index){
				layer.close(index);
				parent.$('#myModal').modal('hide');
				parent.page_reload();
			});
			return;
		}else if(data){
			layer.alert(data.message,8,function(index){
				layer.close(index);
			});
			return;
		}
		layer.alert('操作失败');
		
	}, "json");
	return false;
}

$(function(){
  //parent.update_ifrmae_height('1000px');
  
 jQuery.validator.addMethod("isMobile", function(value, element) {
  var length = value.length;
  var mobile = /^(((13[0-9]{1})|(15[0-9]{1}))+\d{8})$/;
  return this.optional(element) || (length == 11 && mobile.test(value));
 }, "请正确填写您的手机号码");

 jQuery.validator.addMethod("isphone", function(value, element) {
  var length = value.length;
  var phone = /(^(\d{3,4}-)?\d{6,8}$)|(^(\d{3,4}-)?\d{6,8}(-\d{1,5})?$)|(\d{11})/;
  return this.optional(element) || (phone.test(value));
 }, "请填写正确的电话号码");
 
$("#frm").validate({
		submitHandler:function() {
            submit_form_pwd();
        },
        rules: {
            admin_realname: {
                required: true,
                rangelength:[2,40]
            },
            admin_department: {
                rangelength:[2,40]
            },
            admin_tel: {
            	isphone:true,
                maxlength:20
            },
            admin_mobile: {
            	isMobile:true,
                maxlength:20
            },
            admin_email: {
            	email:true,
                maxlength:50
            }
            
        },
        messages: {
            role_name: {
                required: "请输入姓名",
                rangelength: "请输入{0}-{1}个中英文字符"
            },
            admin_department: {
                rangelength: "请输入{0}-{1}个中英文字符"
            },
            admin_tel: {
            	isphone:"请输入正确的联系电话",
             	maxlength:"不能超过20个字符"
            },
            admin_mobile: {
            	isMobile:"请输入正确的手机号",
                maxlength:"不能超过20个字符"
            },
            admin_email: {
            	email:"请输入正确的电子邮箱",
                maxlength:"不能超过50个字符",
            }
	     }
    });
});
$("button[data-dismiss='modal']").click(function(){
	//关闭弹出层
	parent.$('#myModal').modal('hide');
});

var h = parent.$("#recipient-name").attr("height");
$('#body').slimScroll({
	height: 'auto',
});

window.setTimeout(function(){
	parent.$(".modal-content").removeClass("bounceInRight");
},1000);

</script>
<!--#include file="/common/footer_detail.html" -->